name: Final Test - Full CI/CD

on:
  workflow_dispatch:

jobs:
  full-ci-cd-test:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout code
      uses: actions/checkout@v4

    - name: Setup Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '20.x'
        cache: 'npm'

    - name: Install dependencies
      working-directory: ./sait
      run: |
        echo "üì¶ Installing dependencies..."
        npm install
        npm list --depth=0

    - name: Run linter
      working-directory: ./sait
      run: |
        echo "üîç Running linter..."
        npm run lint

    - name: Run type check
      working-directory: ./sait
      run: |
        echo "üîß Running type check..."
        npm run type-check

    - name: Build application
      working-directory: ./sait
      run: |
        echo "üî® Building application..."
        npm run build

    - name: Check build output
      run: |
        echo "üì¶ Build artifacts:"
        ls -la sait/dist/
        echo ""
        echo "üìä Build size:"
        du -sh sait/dist/

    - name: Upload build artifacts
      uses: actions/upload-artifact@v4
      with:
        name: production-build
        path: sait/dist/
        retention-days: 30

    - name: Final success message
      run: |
        echo "üéâ –ü–û–õ–ù–´–ô CI/CD –¢–ï–°–¢ –ü–†–û–®–ï–õ –£–°–ü–ï–®–ù–û!"
        echo "========================================"
        echo ""
        echo "‚úÖ Dependencies: OK"
        echo "‚úÖ Linting: OK"
        echo "‚úÖ TypeScript: OK"
        echo "‚úÖ Build: OK"
        echo "‚úÖ Artifacts: OK"
        echo "‚úÖ Permissions: OK"
        echo ""
        echo "üöÄ –ü–û–ó–î–†–ê–í–õ–Ø–ï–ú! GitHub Actions —Ä–∞–±–æ—Ç–∞—é—Ç –∏–¥–µ–∞–ª—å–Ω–æ!"
        echo ""
        echo "–¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ:"
        echo "   ‚Ä¢ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–±–∏—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç –ø—Ä–∏ –∫–∞–∂–¥–æ–º –ø—É—à–µ"
        echo "   ‚Ä¢ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞—Ç—å –Ω–∞ GitHub Pages"
        echo "   ‚Ä¢ –°–æ–∑–¥–∞–≤–∞—Ç—å —Ä–µ–ª–∏–∑—ã"
        echo "   ‚Ä¢ –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞"
