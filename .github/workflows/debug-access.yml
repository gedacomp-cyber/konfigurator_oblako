name: Debug Access Issues

on:
  workflow_dispatch:

jobs:
  debug:
    runs-on: ubuntu-latest

    steps:
    - name: Debug repository access
      run: |
        echo "üîç Repository Access Debug"
        echo "=========================="
        echo "Repository: ${{ github.repository }}"
        echo "Owner: ${{ github.repository_owner }}"
        echo "Actor: ${{ github.actor }}"
        echo "Event: ${{ github.event_name }}"
        echo "SHA: ${{ github.sha }}"
        echo "Ref: ${{ github.ref }}"
        echo "Token available: ${{ secrets.GITHUB_TOKEN != '' }}"
        echo ""

    - name: Test basic GitHub API access
      run: |
        echo "üåê Testing GitHub API access..."
        curl -H "Authorization: token ${{ secrets.GITHUB_TOKEN }}" \
             -H "Accept: application/vnd.github.v3+json" \
             https://api.github.com/repos/${{ github.repository }} | head -20

    - name: Test repository permissions
      run: |
        echo "üîê Testing repository permissions..."
        curl -H "Authorization: token ${{ secrets.GITHUB_TOKEN }}" \
             -H "Accept: application/vnd.github.v3+json" \
             https://api.github.com/repos/${{ github.repository }}/collaborators/${{ github.actor }}/permission

    - name: Success message
      run: |
        echo "‚úÖ Debug completed!"
        echo ""
        echo "If you see repository info above, access is working."
        echo "If you see errors, check repository permissions."
